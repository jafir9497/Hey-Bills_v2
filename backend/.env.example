# =============================================================================
# Hey-Bills Backend Environment Configuration
# =============================================================================
# Copy this file to .env and configure with your actual values
# This file is specifically for the Express.js backend server

# =============================================================================
# CORE CONFIGURATION
# =============================================================================

# Server Configuration
NODE_ENV=development
PORT=3001
HOST=0.0.0.0

# Application Information
APP_NAME=hey-bills-backend
APP_VERSION=1.0.0

# =============================================================================
# SUPABASE CONFIGURATION (Required)
# =============================================================================

SUPABASE_URL=https://your-project-id.supabase.co
SUPABASE_ANON_KEY=your-anon-key-here
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# Direct PostgreSQL connection (optional, for advanced operations)
DATABASE_URL=postgresql://postgres:your-password@db.your-project-id.supabase.co:5432/postgres

# Connection Pool Settings
DB_POOL_MIN=2
DB_POOL_MAX=10
DB_POOL_IDLE_TIMEOUT=30000
DB_POOL_ACQUIRE_TIMEOUT=60000

# =============================================================================
# AUTHENTICATION & SECURITY
# =============================================================================

# JWT Configuration
JWT_SECRET=your-super-secret-jwt-key-change-in-production
JWT_EXPIRES_IN=24h
JWT_REFRESH_EXPIRES_IN=7d

# OAuth Provider Keys
GOOGLE_CLIENT_ID=your-google-client-id.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret

# Session Configuration
SESSION_SECRET=your-session-secret-key
SESSION_MAX_AGE=86400000

# CORS Configuration
CORS_ORIGIN=http://localhost:5173,http://localhost:3000,capacitor://localhost
CORS_CREDENTIALS=true

# Security Headers
HELMET_ENABLED=true
TRUST_PROXY=true

# =============================================================================
# API SERVICES
# =============================================================================

# OpenAI Configuration
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_ORG_ID=your-openai-org-id
OPENAI_MODEL=gpt-4-turbo-preview
OPENAI_EMBEDDING_MODEL=text-embedding-3-small

# Google Vision API (for OCR)
GOOGLE_VISION_API_KEY=your-google-vision-api-key
GOOGLE_APPLICATION_CREDENTIALS=path/to/service-account.json

# OpenRouter API Configuration (Alternative AI API)
OPENROUTER_API_KEY=sk-or-v1-your-openrouter-api-key-here
OPENROUTER_BASE_URL=https://openrouter.ai/api/v1
OPENROUTER_MODEL=anthropic/claude-3.5-sonnet
OPENROUTER_MODEL_FALLBACK=openai/gpt-4-turbo-preview
OPENROUTER_MAX_TOKENS=4000
OPENROUTER_TIMEOUT=30000

# =============================================================================
# FILE UPLOAD & PROCESSING
# =============================================================================

# Upload Limits
MAX_FILE_SIZE=10485760
MAX_FILES_PER_REQUEST=10

# File Types
ALLOWED_IMAGE_TYPES=image/jpeg,image/png,image/webp
ALLOWED_DOCUMENT_TYPES=application/pdf

# Temporary Storage
TEMP_UPLOAD_DIR=./temp/uploads
CLEANUP_TEMP_FILES=true
TEMP_FILE_MAX_AGE=3600000

# Image Processing
IMAGE_QUALITY=80
IMAGE_MAX_WIDTH=2048
IMAGE_MAX_HEIGHT=2048

# =============================================================================
# OCR & AI PROCESSING
# =============================================================================

# OCR Configuration
OCR_ENGINE=google-vision
OCR_FALLBACK_ENGINE=tesseract
OCR_CONFIDENCE_THRESHOLD=0.6

# Vector Search
EMBEDDING_DIMENSIONS=1536
SIMILARITY_THRESHOLD=0.7
MAX_SEARCH_RESULTS=10

# AI Processing
ENABLE_AI_CATEGORIZATION=true
ENABLE_SMART_EXTRACTION=true
ENABLE_DUPLICATE_DETECTION=true

# =============================================================================
# RATE LIMITING
# =============================================================================

# General API Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Authentication Rate Limiting
AUTH_RATE_LIMIT_WINDOW_MS=900000
AUTH_RATE_LIMIT_MAX_REQUESTS=5

# Upload Rate Limiting
UPLOAD_RATE_LIMIT_WINDOW_MS=3600000
UPLOAD_RATE_LIMIT_MAX_REQUESTS=50

# =============================================================================
# CACHING
# =============================================================================

# Cache Configuration
CACHE_ENABLED=true
CACHE_TTL=3600
CACHE_MAX_SIZE=100

# Redis (if using)
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=your-redis-password
REDIS_DB=0

# =============================================================================
# LOGGING
# =============================================================================

# Logging Configuration
LOG_LEVEL=info
LOG_FORMAT=combined
LOG_FILE=logs/app.log
LOG_ROTATION=daily
LOG_MAX_FILES=7

# Debug Logging
DEBUG_SQL=false
DEBUG_API=false
DEBUG_AUTH=false

# =============================================================================
# MONITORING & HEALTH
# =============================================================================

# Health Check
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_PATH=/health

# Metrics
METRICS_ENABLED=true
METRICS_PATH=/metrics

# Error Tracking
SENTRY_DSN=your-sentry-dsn
SENTRY_ENVIRONMENT=development

# =============================================================================
# NOTIFICATIONS
# =============================================================================

# Email Service (if not using Supabase Auth emails)
EMAIL_SERVICE=smtp
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_SECURE=true
EMAIL_USER=your-email@gmail.com
EMAIL_PASS=your-email-password
EMAIL_FROM=noreply@heybills.com

# Firebase Push Notifications Configuration
FIREBASE_PROJECT_ID=your-firebase-project-id
FIREBASE_PRIVATE_KEY=your-firebase-private-key-multiline
FIREBASE_CLIENT_EMAIL=firebase-adminsdk-xxxxx@your-project.iam.gserviceaccount.com
FIREBASE_PRIVATE_KEY_ID=your-private-key-id
FIREBASE_CLIENT_ID=your-client-id
FIREBASE_AUTH_URI=https://accounts.google.com/o/oauth2/auth
FIREBASE_TOKEN_URI=https://oauth2.googleapis.com/token
FIREBASE_TYPE=service_account
FIREBASE_SERVER_KEY=your-firebase-server-key
FCM_SENDER_ID=123456789012

# =============================================================================
# BACKGROUND JOBS & QUEUES
# =============================================================================

# Job Queue Configuration
ENABLE_JOB_QUEUE=true
JOB_CONCURRENCY=5
JOB_RETRY_ATTEMPTS=3
JOB_RETRY_DELAY=5000

# Scheduled Tasks
ENABLE_CRON_JOBS=true
WEBHOOK_PROCESSING_ENABLED=true

# =============================================================================
# WEBHOOKS & INTEGRATIONS
# =============================================================================

# Supabase Webhooks
SUPABASE_WEBHOOK_SECRET=your-webhook-secret

# External API Webhooks
WEBHOOK_BASE_URL=https://your-domain.com/webhooks
WEBHOOK_TIMEOUT=30000

# =============================================================================
# DEVELOPMENT & TESTING
# =============================================================================

# Development Flags
DEBUG=hey-bills:*
VERBOSE_LOGGING=true
PRETTY_PRINT_JSON=true

# Mock Services (for testing)
MOCK_OPENAI=false
MOCK_GOOGLE_VISION=false
MOCK_EMAIL=false

# Testing Configuration
TEST_PORT=3001
TEST_DATABASE_URL=postgresql://postgres:password@localhost:5432/hey_bills_test

# =============================================================================
# PERFORMANCE
# =============================================================================

# Request Timeouts
REQUEST_TIMEOUT=30000
DATABASE_TIMEOUT=10000
EXTERNAL_API_TIMEOUT=15000

# Compression
COMPRESSION_ENABLED=true
COMPRESSION_THRESHOLD=1024

# Keep-Alive
KEEP_ALIVE_TIMEOUT=5000
HEADERS_TIMEOUT=60000

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Core Features
ENABLE_OCR=true
ENABLE_AI_CHAT=true
ENABLE_VECTOR_SEARCH=true
ENABLE_DUPLICATE_DETECTION=true

# Advanced Features
ENABLE_BUDGET_INSIGHTS=true
ENABLE_WARRANTY_TRACKING=true
ENABLE_EXPENSE_CATEGORIZATION=true
ENABLE_RECEIPT_TEMPLATES=true

# Experimental Features
ENABLE_MULTI_CURRENCY=false
ENABLE_LOCATION_TRACKING=false
ENABLE_VOICE_NOTES=false

# =============================================================================
# DEPLOYMENT & CI/CD
# =============================================================================

# Deployment Environment
DEPLOYMENT_TARGET=development
BUILD_HASH=local
DEPLOY_TIMESTAMP=2024-01-01T00:00:00.000Z
DEPLOYMENT_PLATFORM=heroku

# Production URLs
PRODUCTION_API_URL=https://api.heybills.com
STAGING_API_URL=https://api-staging.heybills.com

# Health Check URLs
HEALTH_CHECK_DEPENDENCIES=supabase,openai,openrouter
EXTERNAL_HEALTH_CHECKS=https://api.openai.com/v1/models,https://openrouter.ai/api/v1/models

# Docker Configuration
DOCKER_NODE_VERSION=18-alpine
DOCKER_PORT=3001

# =============================================================================
# EXAMPLE VALUES (for reference only)
# =============================================================================
# Don't use these in production!
#
# SUPABASE_URL=https://abcdefghijklmnop.supabase.co
# SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
# OPENAI_API_KEY=sk-1234567890abcdef...
# GOOGLE_VISION_API_KEY=AIzaSyAbCdEfGhIjKlMnOpQrStUvWxYz...